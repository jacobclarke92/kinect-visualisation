<!doctype html>

<html>
  <head>
    <meta charset="UTF-8">
    <title>Live Visuals</title>


    <script src="node_modules/requirejs/require.js"></script>

    <script type="application/javascript">
    requirejs(['/node_modules/event-source-polyfill/eventsource.js'],function() {
    	var es = new EventSource("midi.json");
    	var listener = function (event) {
    		var div = document.createElement("div");
			var type = event.type;
			div.appendChild(document.createTextNode(type + ": " + (type === "message" ? event.data : es.url)));
			document.body.appendChild(div);
    	};
    	es.addEventListener("open", listener);
		es.addEventListener("message", listener);
		es.addEventListener("error", listener);
	});
    </script>

</head>
<body>

</body>
</html>